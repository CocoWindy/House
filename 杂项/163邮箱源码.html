<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
		<title>网易免费邮箱 - 中国第一大电子邮件服务商</title>
		<meta name="description" content="网易免费邮箱--中国第一大电子邮件服务商，提供以@163.com、@126.com和@yeah.net为后缀的免费邮箱。14年邮箱运营经验，系统快速稳定，垃圾邮件拦截率超过98%，邮箱容量自动翻倍，支持高达2G超大附件，提供免费网盘及手机邮箱服务。">
		<meta name="keywords" content="邮件，邮箱，电子邮件，电子邮箱，网易邮箱，163邮箱，126邮箱，yeah邮箱，免费邮箱，mail，email，网盘">
		<link rel="shortcut icon" href="http://email.163.com/favicon.ico" />
		<script id="jsOption" type="text/javascript">
			//配置
			var gOption = {
				"sCookieDomain" : "email.163.com",//cookie域
				"url2" : "http://mail.126.com/errorpage/err_126.htm",//http登录错误转向
				"product" : "mail163",//http登录产品
				"sDomain" : "163.com",//当前域名
				"sSslUrl2" : "https://reg.163.com/logins.jsp?",//旧ssl
				"sHttpUrl2" : "http://reg.163.com/login.jsp?",//旧http
				"gad" : "email.163.com",
				//所有域及缩写
				"aAllDomain" : 
					{
						"163" : "163.com",
						"126" : "126.com",
						"yeah" : "yeah.net",
						"qiye" : "",
						"shouji" : ""
					},
				"163" : {
					"sSslUrl" : "https://ssl.mail.163.com/entry/coremail/fcg/ntesdoor2?",
					"sEntryUrl" : "http://entry.mail.163.com/coremail/fcg/ntesdoor2?",
					"sHelpUrl" : "http://help.163.com/special/007525G0/163mail_index.html?b65abh1",
					"sWhySSLUrl" : "http://help.163.com/09/1216/16/5QLUD00100753VB8.html?from=b08abI1",
					"sLoginTitle" : "登录163网易免费邮"
				},
				"126" : {
					"sSslUrl" : "https://ssl.mail.126.com/entry/cgi/ntesdoor?",//SSL URS
					"sEntryUrl" : "http://entry.mail.126.com/cgi/ntesdoor?",//Entry
					"sHelpUrl" : "http://help.163.com/special/007525FQ/126mail.html?b65abh1",//帮助链接
					"sWhySSLUrl" : "http://help.163.com/09/1211/11/5Q8HP12L00753VB9.html?from=b09abI1",//什么是SSL链接
					"sLoginTitle" : "登录126网易免费邮"//登录框标题
				},
				"yeah" : {
					"sSslUrl" : "https://ssl.mail.yeah.net/entry/cgi/ntesdoor?",
					"sEntryUrl" : "http://entry.mail.yeah.net/cgi/ntesdoor?",
					"sHelpUrl" : "http://help.163.com/special/007525FQ/dimondmain.html?b65abh1",
					"sWhySSLUrl" : "http://help.163.com/09/1202/16/5PHRQF8400753VBA.html?from=b12abI1",
					"sLoginTitle" : "登录yeah.net网易免费邮"
				},
				"qiye" : {
					"sSslUrl" : "",
					"sEntryUrl" : "",
					"sHelpUrl" : "http://qiye.163.com/service-solution.htm",
					"sWhySSLUrl" : "http://qiye.163.com/service-solution.htm#4",
					"sLoginTitle" : "登录网易企业邮箱"
				},
				"shouji" : {
					"sSslUrl" : "",
					"sEntryUrl" : "",
					"sHelpUrl" : "http://help.163.com/special/007525G0/163mail_index.html?b65abh1",
					"sWhySSLUrl" : "http://help.163.com/09/1216/16/5QLUD00100753VB8.html?from=b08abI1",
					"sLoginTitle" : "登录手机号码邮箱"
				}
			}
		</script>
		<script id="jsBase" type="text/javascript" src="http://mimg.127.net/index/lib/scripts/base_v3.js"></script>
		<script id="jsBaseInner" type="text/javascript">
			//判断cookie
			fCheckCookie();
			//HTML5初始化
			fHtml5Tag();
			// 判断UA版本，据此进行跳转
			var bForcepc = fGetQuery("dv") == "pc";
			var bPreviewPc = fGetQueryHash("preview_dv") =="pc";//附件预览
			(function fBrowserRedirect(){
				var sUserAgent = navigator.userAgent.toLowerCase();
				var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";	
				var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
				var bIsMidp = sUserAgent.match(/midp/i) == "midp";
				var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
				var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
				var bIsAndroid = sUserAgent.match(/android/i) == "android";
				var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
				var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
				if(bIsIpad){
					var sUrl = location.href;    
					if(!bForcepc && !bPreviewPc){
						window.location.href = "http://ipad.email.163.com/";
					}
				}
				if(bIsIphoneOs){
					var sUrl = location.href;    
					if(!bForcepc && !bPreviewPc){
						window.location.href = "http://smart.mail.163.com/";
					}
				}
				if(bIsAndroid){
					top.location.href = 'http://mail.163.com/html/android_device/v1.htm?smart=' + encodeURIComponent('http://smart.mail.163.com/') + '&pad=' + encodeURIComponent('http://ipad.email.163.com/');
				}
				if(bIsMidp||bIsUc7||bIsUc||bIsCE||bIsWM){
					var sUrl = location.href;    
					if(!bForcepc && !bPreviewPc){
						window.location.href = "http://m.mail.163.com/";
					}
				}
			})();
			//判断输入用户名
			function fCheckAccount(oThis){
				var sRep163 = /@163.com$/;
				var sRep126 = /@126.com$/;
				var sRepyeah = /@yeah.net$/;
				var sAccount = oThis.value;
				var bShouji = /^\d{1,11}(?:@.*)?$/.test(oUserIpt.value);//是否为手机账号
				var bAt;
				bAt = sAccount.indexOf("@") == -1;
				if(!bShouji){
					if(sRep163.test(sAccount)){
						gCurrentDomain = "163";
						fSwitchTab("163");
					}else if(sRep126.test(sAccount)){
						gCurrentDomain = "126";
						fSwitchTab("126");
					}else if(sRepyeah.test(sAccount)){
						gCurrentDomain = "yeah";
						fSwitchTab("yeah");
					}
				}
				if(!bAt && gCurrentDomain != "qiye"){
					var aAccountSplit;
					aAccountSplit = sAccount.split("@");
					oThis.value=aAccountSplit[0];
					/**
					if (gCurrentDomain == "qiye" && oThis.id == "userNameIpt")
					{
						oUserIpt.value = aAccountSplit[0];
						oDomainQiye.value = aAccountSplit[1];
						oTxtPwd.focus();
					}
					if (gCurrentDomain == "qiye" && oThis.id == "domainSelectQiye")
					{
						oDomainQiye.value = aAccountSplit[1];
						if (oUserIpt.value == "")
						{
							oUserIpt.focus();
						}else{
							oTxtPwd.focus();
						}
					}
					*/
				}
			}
		</script>
	</head>

	<body class="mail-163">
	
		<div class="g-dialogBox" id="preview_popup">
			<div class="g-dialogBox-hd">
				<b class="g-dialogBox-hd-rc g-dialogBox-hd-rc-1"></b>
				<b class="g-dialogBox-hd-rc g-dialogBox-hd-rc-2"></b>
				<h3 class="g-dialogBox-hd-title">系统提示</h3>
				<span class="g-dialogBox-hd-ext">
					<a href="javascript:void(0);" id="preview_popup_close" class="g-dialogBox-hd-oprt g-dialogBox-hd-oprt-close"></a>
				</span>
			</div>
			<div class="g-dialogBox-bd">
				<!--自定义内容-->
				<div class="g-dialogBox-simpleContent">
					<p class="title" id="preview_popup_cont"></p>
				</div>
			</div>
			<div class="g-dialogBox-ft">
				<div class="g-dialogBox-ft-oprt">
					<div class="g-btn g-btn-impt">
						<a href="javascript:void(0)" id="preview_popup_submit" class="g-btn-inner" hidefocus="hidefocus"><b class="g-btn-rc g-btn-rc-1"></b><b class="g-btn-rc g-btn-rc-2"></b>
							&nbsp;确 定&nbsp;
						</a>
					</div>
				</div>				
			</div>
		</div>		
		<div class="mask" id="mask"><iframe class="iframe" frameborder="0" scrolling="no" src="about:blank"></iframe></div>
		
		<div class="page" id="page">
			<!-- 头 -->
			<header>
				<div class="inner">
					<h1><a href="http://www.163.com/" target="_blank"><img src="http://mimg.127.net/index/email/img/2012/ntes_logo.png" alt="网易NetEase" width="87" height="27" /></a></h1>
					<p class="ext"><a class="link" href="http://vipmail.163.com/?from=email" title="收费邮" target="_blank">收费邮</a><a class="link" href="qiye" title="企业邮箱" target="_blank">企业邮箱</a><a class="link" href="http://hw.mail.163.com/" title="国外用户登录" target="_blank">国外用户登录</a><a class="link" href="javascript:void(0);" title="" id="lnkHelp" target="_blank">帮助</a></p>
				</div>
				<div class="bg"></div>
			</header>
			<!-- 主要内容 -->
			<div class="main" id="main">
				<div class="inner">
					<h3 id="mainHd">中国第一大电子邮件服务商</h3>
					<div class="tab">
						<div class="tab-list">
							<ul>
								<li id="tab163Link" class="item item-163">
									<div class="logo"><b class="ico ico-logo ico-logo-163">163网易免费邮</b></div>
									<div class="bg"></div>
									<div class="bg-selected"></div>
								</li>
								<li id="tab126Link" class="item item-126">
									<div class="logo"><b class="ico ico-logo ico-logo-126">126网易免费邮</b></div>
									<div class="bg"></div>
									<div class="bg-selected"></div>
								</li>
								<li id="tabyeahLink" class="item item-yeah">
									<div class="logo"><b class="ico ico-logo ico-logo-yeah">yeah.net网易免费邮</b></div>
									<div class="bg"></div>
									<div class="bg-selected"></div>
								</li>
								<li id="tabshoujiLink" class="item item-shouji">
									<div class="logo"><b class="ico ico-logo ico-logo-shouji">手机号码邮箱</b></div>
									<div class="bg"></div>
									<div class="bg-selected"></div>
								</li>
							</ul>
							<span class="shadow shadow-bottom">&nbsp;</span>
							<span class="shadow shadow-top">&nbsp;</span>
							<span class="shadow shadow-left">&nbsp;</span>
						</div>
						<div class="tab-panel">
							<div class="form">
								<form method="post" name="" id="loginFormQiye" target="_top" style="display:none;" action="">
									<input type="hidden" name="account_name" id="txtUserNameqiye" value="" />
									<input type="hidden" name="domain" id="txtUserDomainqiye" value="" />
									<input type="hidden" name="password" id="txtPasswordqiye" value="" />
									<input type="hidden" id="qiyeall_secure" name="all_secure" value="1"/>
									<input type="hidden" id="qiye_secure" name="secure" value="1"/>
								</form>
								<h2 class="hd" id="LoginTitle">登录163网易免费邮箱</h2>							
								<form class="bd" name="frmLogin" method="post" id="loginForm" onSubmit="return fSubmit()" target="_top">
									<input type="hidden" id="idInput" />
									<input type="hidden" id="account" name="username" /><!-- ssl加密传输用户名 -->
									<input type="hidden" name="url2" id="url2" />
									<input type="hidden" name="savalogin" id="savelogin" value="0" /><!-- 兼容base 无自动登录 -->
									<!-- 帐号 -->
									<div class="ipt ipt-t user" id="idInputLine">
										<b class="ico"></b>
										<input type="text" id="userNameIpt" autocomplete="off"/>
										<b class="domain" id="domainText">@163.com</b>
										<input tabindex="2" type="text" id="domainSelectQiye" class="ipt ipt-t domain-qiye" style="display:none;" />
										<select id="domainSelect" style="display:none;">
											<option value="163">163.com</option>
											<option value="126">126.com</option>
											<option value="yeah">yeah.net</option>
										</select>
										<label for="userNameIpt" class="placeholder" id="idPlaceholder">帐号或手机号</label>
									</div>
									<!-- 密码 -->
									<div class="ipt ipt-t pass" id="pwdInputLine">
										<input type="password" name="password" id="pwdInput"/>
										<button id="btnSubmit" title="登录" class="btn btn-login" type="submit"></button>
										<label for="pwdInput" class="placeholder" id="pwdPlaceholder">密码</label>
									</div>
									<!-- 风格 -->
									<div id="setStyleOutter" style="display:none;">
										<select tabindex="4" class="sel" id="selStyle" onchange="fStyleEvent();"><option value="-1">默认版本&nbsp;</option><option value="5">网易邮箱5.0</option><option value="3">网易邮箱5.0简约版</option></select>
									</div>
									<!-- 相关选项 -->
									<div class="options">
										<label class="ipt-wraper" style="margin-right:56px;"><input tabindex="5" type="checkbox" class="ipt ipt-c" id="rmbUser"><b class="ico ico-checkbox"></b>记住帐号</label><label class="ipt-wraper"><input tabindex="6" type="checkbox" class="ipt ipt-c" id="chkSSL"><b class="ico ico-checkbox"></b>SSL安全登录<a id="lnkWhySSL" class="help" target="_blank" title="什么是SSL登录" tabindex="6" href="http://help.163.com/08/1111/17/4QG2LL4R00752UPN.html"><img src="http://mimg.127.net/p/t.gif" class="ico ico-why" alt="什么是SSL登录"></a></label><label class="ipt-wraper"><input tabindex="6" id="allSSL" type="checkbox" class="ipt ipt-c" /><b class="ico ico-checkbox"></b>全程SSL</label>
										<a class="ext" href="javascript:void(0);" title="" id="forGetPassword" target="_blank">忘记密码？</a>
									</div>
									<div id="divError"></div>
									<div class="ft" id="loginFootTipsVer">
										<span class="ft-mailver-text">邮箱版本：</span>
										<a id="ftVerSelLink" class="ft-mailver-now" href="javascript:void(0);">
											<span id="ftVerSelLinkTxt"></span>
											<div id="ftDarr" class="ft-mailver-darr"></div>
										</a>
									</div>
									<div class="ft" id="loginFootTips"></div>
									<div class="ft-ext" id="loginFootTipsQiye">
										<a href="http://qiye.163.com/admin.jsp">进入管理员登录页面<b class="ico ico-rArr"></b></a>
									</div>
									<div class="ft-ext" id="loginFootTipsRight"></div>
									<div class="ft-verSelect" id="verSelect">
										<div class="ft-verSelect-inner" id="verSelectUl">
											<ul>
												<li>
													<a class="ft-verSelect-inner-a" data-ver="default" href="javascript:void(0)" onclick="fVerSelect(this);">默认版本&nbsp;</a>
												</li>
												<li>
													<a class="ft-verSelect-inner-a" data-ver="js5" href="javascript:void(0)" onclick="fVerSelect(this);">网易邮箱5.0</a>
												</li>
												<li>
													<a class="ft-verSelect-inner-a" data-ver="jy5" href="javascript:void(0)" onclick="fVerSelect(this);">网易邮箱5.0简约版</a>
												</li>
											</ul>
											<b id="verSelectTick" class="ft-verSelect-tick"></b>
										</div>
									</div>
								</form>
							</div>
							<b class="ico ico-arr tab-panel-locat"></b>
							<span class="shadow shadow-bottom">&nbsp;</span>
							<span class="shadow shadow-top">&nbsp;</span>
							<span class="shadow shadow-left">&nbsp;</span>
							<span class="shadow shadow-right">&nbsp;</span>
						</div>
					</div>
				</div>
			</div>
			<!-- 推广 -->
			<div class="expansion">
				<div class="inner">
					<div class="left tranex"><span>・</span><a id="gadext1" href="#" target="_blank">&nbsp;</a></div>
					<div class="tranex"><span>・</span><a id="gadext2" href="#" target="_blank">&nbsp;</a></div>
					<div class="right tranex"><span>・</span><a id="gadext3" href="#" target="_blank">&nbsp;</a></div>
				</div>
			</div>
			<!-- 底 -->
			<footer class="copyright">
				<div class="inner">
					<h2 class="copy-title">底部版权</h2>
					<ul class="copy-list">
						<li class="copy-item"><a href="http://corp.163.com/index_gb.html" target="_blank">关于网易</a></li><li class="copy-item"><a href="http://mail.163.com/html/mail_intro" target="_blank">关于网易免费邮</a></li><li class="copy-item"><a href="http://mail.blog.163.com/" target="_blank">邮箱官方博客</a></li><li class="copy-item"><a href="http://help.163.com/" target="_blank">客户服务</a></li><li class="copy-item"><a href="http://corp.163.com/gb/legal/legal.html" target="_blank">隐私政策</a></li><li class="copy-item"><span class="sptln">|</span>网易公司版权所有&nbsp;&copy;&nbsp;1997-2013</li><li class="copy-item copy-item-img"><a id="KX_IMG" href="https://ss.cnnic.cn/verifyseal.dll?sn=e12051044010020841301459&amp;ct=df&amp;pa=363285" target="_blank"><img src="http://mimg.127.net/logo/knet.png" alt="可信网站，身份验证"></a></li>
					</ul>
				</div>
				<div class="bg"></div>
			</footer>
			<!-- 背景 -->
			<div class="theme" id="theme"></div>	
			<!--ssl链接预加载-->
			<img src="https://ssl.mail.163.com/httpsEnable.gif" width="0" height="0" />	
		</div>
		<!-- Devilfish -->
		<script src="http://analytics.163.com/ntes.js" type="text/javascript"></script>
		<script type="text/javascript">
		_ntes_nacc = "163mail";
		neteaseTracker();
		</script>
		<script type="text/javascript">
			var gWindow = {};
			// 获取窗口宽高
			function fCalc(){
				gWindow.width = typeof window.innerWidth == "undefined" ? document.documentElement.clientWidth : window.innerWidth;
				gWindow.height = typeof window.innerHeight == "undefined" ? document.documentElement.clientHeight : window.innerHeight;
				// 窗口最小高度不能小于435像素
				gWindow.height = gWindow.height <= 435 ? 435 : gWindow.height;
			}
			fCalc();
			// 背景图上下左右居中
			function fChangeBg(){
				var oBgImg = $id("themeImg");
				var nImgHeight = oBgImg.height;
				var nImgWidth = oBgImg.width;
				if(typeof gWindow.height == "undefined"){
					fCalc();
				}
				oBgImg.style.top = (gWindow.height - nImgHeight)/2 + "px";
				oBgImg.style.left =  (gWindow.width - nImgWidth)/2 + "px";
			}
			// 初始化登录区域
			var oMain = $id("main");
			var oMainHd = $id("mainHd");
			function fChangePos(){
				if(typeof gWindow.height == "undefined"){
					fCalc();
				}
				// 登录框上下居中
				oMain.style.marginTop = (gWindow.height - 45 - 65 - 308)/2 + "px";
				if(gWindow.height < 700){
					oMainHd.style.top = "-50px";
					if(gWindow.height < 520){
						oMainHd.style.display = "none";
					}else{
						oMainHd.style.display = "block";
					}
				}else{
					 oMainHd.style.top = "-80px";
				}
			}
			fChangePos();
			window.onresize = function(){
				fCalc();
				fChangeBg();
				fChangePos();
			}
			$id("theme").innerHTML = '<img src="http://mimg.127.net/index/email/img/2012/all2.jpg" id="themeImg" onload="fChangeBg();"/>';
			// 初始化复选框选中事件
			$id("rmbUser").parentNode.onclick = function(){fCheckboxChange($id("rmbUser"))};
			function fCheckboxChange(oInput){
				if(oInput.checked){
					fCls(oInput.parentNode,"ipt-wraper-checked","add");
					oInput.checked = true;
				}else{
					fCls(oInput.parentNode,"ipt-wraper-checked","remove");
					oInput.checked = false;
				}
			};
			
		
			
			//变量定义
			var gCurrentDomain = "163",											//当前域
			gShoujiDomain = "",													//手机号码邮箱域
			gShoujiCache = {},													//手机号码邮箱接口数据缓存
			gLoginInfo = {},															//用户登录信息
			bIsEuid = false,															//是否有euid
			sPreUrl,																		//附件预览
			sPreUid,																		//附件预览
			sPreReason,																	//登录原因
			sUid,																			//uid
			sStyle,																		//判断#style来写死style
			sEnUsername,																//反编码&替换后的euid
			oForm = $id("loginForm"),												//免费邮登录表单
			oFormQiye = $id("loginFormQiye"),								//免费邮登录表单
			oUrl2 = $id("url2"),														//错误转向URL
			oUserName = $id("idInput"),											//有euid时调用
			oUserIpt = $id("userNameIpt"),										//用户名
			oTxtAccount = $id("account"),										//帐户(有域名)
			oTxtPwd = $id("pwdInput"),											//密码
			oDomain = $id("domainSelect"),									//域名
			oDomainQiye = $id("domainSelectQiye"),						//域名-企业邮
			oStyle = $id("selStyle"),												//风格
			oGetPwd = $id("forGetPassword"),									//忘记密码
			oLoginOpt = $id("loginOption"),										//登录操作
			oErr = $id("divError"),													//错误提示
			oLoginFtTips = $id("loginFootTips"),								//底部信息
			oIdL = $id("idInputLine"),
			oIdLabel = $id("idPlaceholder"),
			oPwL = $id("pwdInputLine"),
			oPwLabel = $id("pwdPlaceholder");

			//tab切换
			function fSwitchTab(sDomain) {
				oErr.style.display = 'none';
				var oDomainMap = {
					 '163' : '163.com'
					,'126' : '126.com'
					,'yeah' : 'yeah.net'
				};
				/**
				for(var i in gOption["aAllDomain"]){
					$id("tab" + i).className = "tab-item";
				}
				$id("tab" + sDomain).className = "tab-item tab-item-on";
				*/
				if(oDomainMap[sDomain]){
					$id('domainText').innerHTML = '@' + oDomainMap[sDomain];
				}

				oUserIpt.removeAttribute('maxLength');
				fEventUnlisten(oUserIpt, "blur", fCheckShoujiDomain);
				
				document.body.className = "mail-" + sDomain;
				$id("rmbUser").checked = true;
				$id("chkSSL").checked = true;
				$id("allSSL").checked = false;
				$id("LoginTitle").innerHTML =  gOption[sDomain]["sLoginTitle"];
				$id("lnkHelp").href = gOption[sDomain]["sHelpUrl"];
				$id("lnkWhySSL").href = gOption[sDomain]["sWhySSLUrl"];
				gCurrentDomain = sDomain;//本地调用
				gOption["sDomain"] = gOption["aAllDomain"][gCurrentDomain];//获取当前域缩写，找到对应域，赋值给gOption供base调用、
				gOption["product"] = "mail" + gCurrentDomain;
				//每次tab切换都写入cookie
				fSetCookie("alllogindomain", gCurrentDomain, true);
				// 隐藏版本选择框
				$id('verSelect').style.display = 'none';
				if(sDomain == "qiye"){
					$id("idPlaceholder").innerHTML = "请输入完整的邮箱地址";
					$id("allSSL").parentNode.style.display = "";
					$id("allSSL").parentNode.style.position = "absolute";
					$id("allSSL").parentNode.style.margin = "0";
					$id('allSSL').parentNode.style.right = "0";
					$id('allSSL').parentNode.style.top = "0";
					$id('rmbUser').checked = false;
					oLoginFtTips.innerHTML="<a href='http://qiye.163.com/mail/buy-price.htm' target='_blank' tabIndex='9'>立即购买网易企业邮箱<b class='ico ico-rArr'></b></a>";
					oLoginFtTips.style.display = 'block';
					fLoginFtTipsVer(false);
					oGetPwd.style.display = 'none';
					$id('loginFootTipsQiye').style.display = 'block';
					$id('loginFootTipsRight').style.display = 'none';

				}else if(sDomain == "shouji"){

					oUserIpt.setAttribute('maxLength', 11);
					if(oUserIpt.value.length > 11){
						oUserIpt.value = oUserIpt.value.substr(0, 11);
					}

					$id("idPlaceholder").innerHTML = '请输入手机号码';
					$id('rmbUser').checked = false;

					$id('loginFootTips').style.display = 'block';
					$id('loginFootTipsRight').style.display = 'none';
					$id('loginFootTipsQiye').style.display = 'none';
					$id("allSSL").parentNode.style.display = "none";

					oLoginFtTips.style.display = 'block';
					fLoginFtTipsVer(false);
					oLoginFtTips.innerHTML="还没有网易手机号码邮箱？<a href='http://reg.email.163.com/unireg/call.do?cmd=register.entrance&flow=mobile&from=email_mobile' target='_blank' tabIndex='9'>免费激活</a>";

					// 手机号码邮箱需要自动判断域
					fEventListen(oUserIpt, "blur", fCheckShoujiDomain);

					// 如果已经填了帐号就判断手机号码邮箱域
					if(oUserIpt.value){
						fCheckShoujiDomain();
					}

				}else{
					$id("idPlaceholder").innerHTML = "帐号或手机号";
					$id("allSSL").parentNode.style.display = "none";
					// oLoginFtTips.innerHTML="还没有网易免费邮?<a href='http://reg.email.163.com/mailregAll/reg0.jsp?from=email163&regPage="+ sDomain + "'target='_blank' tabIndex='9'>立即注册</a>";
					oLoginFtTips.style.display = 'none';
					$id('loginFootTipsRight').innerHTML = '<a href="http://reg.email.163.com/mailregAll/reg0.jsp?from=email163&regPage=' + sDomain + '" target="_blank" tabIndex="9">注册网易免费邮</a>';
					$id('loginFootTipsRight').style.display = 'block';
					fLoginFtTipsVer(true);
					oDomain.value = sDomain;
					oGetPwd.style.display = '';
					oGetPwd.href = "http://reg.163.com/RecoverPasswd1.shtml";
					$id('loginFootTipsQiye').style.display = 'none';
					oGetPwd.innerHTML = "忘记密码?";
					oIdLabel.style.display = "block"; // 120802
					$id('rmbUser').checked = true;
				}
				fCheckboxChange($id("rmbUser"));
				fCheckboxChange($id("chkSSL"));
				fCheckboxChange($id("allSSL"));
				fSwitchUserInfo();//读取用户名-风格信息等
				fStyleEvent();
				//检查是否输入
				if( oUserIpt.value=="") {
					oUserIpt.focus();
				} else {
					if (sDomain == "qiye" && oDomainQiye.value == ""){
						// oDomainQiye.focus();return true
					}//域名输入框聚焦
					oTxtPwd.focus();
				}
				// 统计请求
				fTmpSwitchLog(sDomain)
			}

			// 手机号码输入框
			function fCheckShoujiDomain(){
				var r = /^1\d{10}$/;
				var sId = oUserIpt.value;
				if(r.test(sId)){
					if(gShoujiCache[sId]){
						fSetShoujiDomain(gShoujiCache[sId]);
					}else{
						fGetScript('http://mbind.mail.126.com/mbind/qu.do?pn=' + sId);
					}
					oErr.style.display = 'none';
					oErr.innerHTML = '';

				}else if(oUserIpt.value){
					oErr.style.display = '';
					oErr.innerHTML = "请输入手机号码";
				}
			}

			// 手机号码判断域名接口回调
			function MobCallback(o){
				if(o.nCode != 200){
					oErr.style.display = '';
					oErr.innerHTML = '该手机号码邮箱尚未激活，<a href="http://reg.email.163.com/unireg/call.do?cmd=register.entrance&flow=mobile&from=email_mobile" target="_blank">免费激活</a>';
					return;
				}

				var r163 = /@163\.com$/;
				var r126 = /@126\.com$/;
				var rYeah = /@yeah\.net$/;
				var rVip = /@(?:vip|188)/;
				var sDomain = '';

				var sId = o.sNum;
				if(rVip.test(sId)){
					oErr.style.display = '';
					oErr.innerHTML = '您是VIP邮箱用户，登录请点<a href="http://vipmail.163.com/" target="_blank">这里</a>';
					return;
				}else if(r163.test(sId)){
					sDomain = '163';
				}else if(r126.test(sId)){
					sDomain = '126';
				}else if(rYeah.test(sId)){
					sDomain = 'yeah';
				}

				fSetShoujiDomain(sDomain);
				gShoujiCache[oUserIpt.value] = sDomain;
			}

			// 设置手机号码域
			function fSetShoujiDomain(sDomain){
				gShoujiDomain = sDomain;
				gOption["product"] = 'mail' + sDomain;
				gOption["sDomain"] = gOption["aAllDomain"][sDomain];
			}
			
			// 版本设置框
			function fLoginFtTipsVer(bSwitch){
				fLoginFtDarr();
				var oVer = $id('loginFootTipsVer');
				var nShow = 'block';
				if(bSwitch){
					
				}else{
					nShow = 'none';
				}
				oVer.style.display = nShow;
				return;
			}
			
			// 下拉三角
			function fLoginFtDarr(){
				if($id('ftDarr').innerHTML == ''){
					var sHtml = fEmuIcon([
						{x : 0, y : 0, width : 7, height : 1}
						,{x : 1, y : 1, width : 5, height : 1}
						,{x : 2, y : 2, width : 3, height : 1}
						,{x : 3, y : 3, width : 1, height : 1}
					]);
					$id('ftDarr').innerHTML = sHtml;
				}
			}
			
			// 模拟图标
			function fEmuIcon(aPixel){
				var sHtml = '';
				for(var i = 0; i < aPixel.length; i++){
					var sBgColor = '';
					if(aPixel[i].color){
						sBgColor = 'background-color:#' + aPixel[i].color + ';';
					}
					var sPixelHtml = '<i style="position:absolute;height:' + aPixel[i].height + 'px;overflow:hidden;left:' + aPixel[i].x + 'px;top:' + aPixel[i].y + 'px;width:' + aPixel[i].width + 'px;' + sBgColor + '"></i>'
					sHtml += sPixelHtml;
				}
				return sHtml;
			}
			
			fEventListen($id('ftVerSelLink'), 'click', function(){
				$id('verSelect').style.display = 'block';
			});
			
			$id('verSelect').onmouseout = function(e){
				var oE = e || window.event;
				var that = this;
				fE(function(){
					fBodyClick();
				}, oE, that);
			};
			//版本选择
			window.fBodyClick = function(){
				$id('verSelect').style.display = 'none';
			};
			//阻止事件触发
			function fE(fFunc, oE, oThat){
				var e = oE,
				relatedTarget = e.toElement || e.relatedTarget;
				while(relatedTarget && relatedTarget != oThat){
					relatedTarget = relatedTarget.parentNode;
				}
				if(!relatedTarget){
					fFunc();
				}
			}
			
			// 选择版本
			function fVerSelect(oTar, sFunc, sStyle){
				var oStyleMap = {
					 'default' : 0
					,'js5' : 1
					,'jy5' : 2
					//,'jy3' : 3
					,'jy3' : 0
				};
				if(sFunc == 'init'){
					var oLink;
					try{
						var aOption = $id('selStyle').getElementsByTagName('OPTION');
						var nIndex = 0;
						for(var i=0; i<aOption.length; i++){
							if(aOption[i].value == sStyle){
								nIndex = i
							}
						}
						var nLen = $id('verSelectUl').getElementsByTagName('A').length;
						if(nIndex < nLen -1){
							var oLink = $id('verSelectUl').getElementsByTagName('A')[nIndex];
							fVerSelect(oLink);
						}
					}catch(e){
						oLink = $id('verSelectUl').getElementsByTagName('A')[0];
						fVerSelect(oLink);
					}
				}else{
					var aAllStyle = $id('verSelectUl').getElementsByTagName('A');
					for(var i=0; i<aAllStyle.length; i++){
						aAllStyle[i].className = 'ft-verSelect-inner-a';
						if(aAllStyle[i] == oTar){
							fEmuIconTick(i);					
						}
					}
					oTar.className += ' ft-verSelect-inner-a-selected';
					var sSel = 0;
					var sVer = oTar.getAttribute('data-ver');
					if(oStyleMap[sVer] || oStyleMap[sVer] == 0){
						sSel = oStyleMap[sVer];
					}
					$id('selStyle').selectedIndex = sSel;
					$id('ftVerSelLinkTxt').innerHTML = $id('selStyle').getElementsByTagName('OPTION')[sSel].innerHTML;
					$id('verSelect').style.display = 'none';
				}
			}
			
			function fEmuIconTick(nIndex){
				if($id('verSelectTick').innerHTML == ''){
					$id('verSelectTick').innerHTML = '<i style="position:absolute;height:1px;overflow:hidden;left:10px;top:3px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:9px;top:4px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:10px;top:4px;width:1px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:8px;top:5px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:9px;top:5px;width:2px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:2px;top:6px;width:1px;" class="icoTick-color3"></i><i style="position:absolute;height:1px;overflow:hidden;left:3px;top:6px;width:1px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:4px;top:6px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:7px;top:6px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:8px;top:6px;width:2px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:10px;top:6px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:2px;top:7px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:3px;top:7px;width:2px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:5px;top:7px;width:2px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:7px;top:7px;width:2px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:9px;top:7px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:3px;top:8px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:4px;top:8px;width:4px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:8px;top:8px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:4px;top:9px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:5px;top:9px;width:2px;" class="icoTick-color2"></i><i style="position:absolute;height:1px;overflow:hidden;left:7px;top:9px;width:1px;" class="icoTick-color1"></i><i style="position:absolute;height:1px;overflow:hidden;left:5px;top:10px;width:2px;" class="icoTick-color1"></i>'
				}
				$id('verSelectTick').style.top = ( 24 * nIndex + 5) + 'px'
				return ;
		}
			
			//读取用户名-企业邮域名-风格信息等-切换tab时调用
			function fSwitchUserInfo() {
				window.oStyle = $id("selStyle"); //风格
				oTxtPwd.value = "";
				if(gLoginInfo[gCurrentDomain]){
					oUserIpt.value = gLoginInfo[gCurrentDomain].username;					
					// 企业tab不显示三域地址
					if( gLoginInfo[gCurrentDomain].style == 4 || gLoginInfo[gCurrentDomain].style == 1 || gLoginInfo[gCurrentDomain].style == "" ){
						gLoginInfo[gCurrentDomain].style = -1;
					}
					// 兼容js4调整为8的情况
					if(gLoginInfo[gCurrentDomain].style == 9){
						gLoginInfo[gCurrentDomain].style = 8;
					}
					// 兼容jy5调整为3的情况
					if(gLoginInfo[gCurrentDomain].style == 6){
						gLoginInfo[gCurrentDomain].style = 3;
					}
					oStyle.value = gLoginInfo[gCurrentDomain].style;
				}else{
					if(gCurrentDomain == 'qiye'){
						oUserIpt.value = '';
					}
					oStyle.value = -1;
				}
				
				if(gCurrentDomain != 'qiye' && (oUserIpt.value.indexOf('@') > -1)){
					oUserIpt.value = '';
				}
				
				if (sStyle){//判断是否带style参数，有则强制风格
					oStyle.value = sStyle;
					oStyle.disabled = true;
				}
				if( gCurrentDomain == "qiye" && (fGetCookie("qiyeDomain") != "") && (fGetCookie("qiyeDomain") != undefined)){
					oDomainQiye.value = fGetCookie("qiyeDomain");//读取企业邮域名
				}
				
				// 驱动模拟版本选择
				fVerSelect(null, 'init', oStyle.value);
			}

			//SSL&全程SSL联动
			function fSecureLinkage(obj, id){
				if(obj.checked && obj.id == "allSSL" ){
					$id(id).checked = true;
				}
				if( !obj.checked && obj.id == "chkSSL" ){
					$id(id).checked = false;
				}
				fCheckboxChange(obj);
				fCheckboxChange($id(id));
			}

			// 提交
			function fSubmit() {
				oUserIpt.value = fTrim(oUserIpt.value);
				if( oUserIpt.value ==""){
					oErr.style.display = '';
					oErr.innerHTML = "请输入你的帐号";
					oUserIpt.focus();
					// cava oUserIpt.className += " ipt-t-focus";
					return false;
				}
				
				if(gCurrentDomain == "qiye" ){
					var aQiyeAcc = oUserIpt.value.split('@');
					if(aQiyeAcc[1]){
						oDomainQiye.value = aQiyeAcc[1];
					}
				}
				if( oDomainQiye.value.length =="" && gCurrentDomain == "qiye" ) {
					oErr.style.display = '';
					oErr.innerHTML = "请输入域名";
					oUserIpt.focus();
					return false;
				}
				

				if( oTxtPwd.value.length =="") {
					oErr.style.display = '';
					oErr.innerHTML = "请输入你的密码";
					if(!oUserIpt.value){
						oTxtPwd.focus();
					}
					// cava oTxtPwd.className += " ipt-t-focus";
					return false;
				}

				if(gCurrentDomain == 'shouji'){
					if(!gShoujiDomain){
						fCheckShoujiDomain();
						return false;
					}
					gCurrentDomain = gShoujiDomain;
					oDomain.value = gCurrentDomain;
				}

				//获取previewurl
				if (sPreUrl != null)
				{
					var nPreUid= window.location.hash.indexOf("&preview_uid"),
					nPreUrl= window.location.hash.indexOf("preview_url");
					sPreUrl = window.location.hash.substring(nPreUrl+12,nPreUid);
					sPreUrl = unescape(sPreUrl);
				}
				if( oTxtPwd.value.length > 16 && gCurrentDomain != "qiye" ){
					oTxtPwd.value = oTxtPwd.value.substr(0,16);
				}
				if (oUserIpt.value != sEnUsername)
				{
					bIsEuid = false;
				}
				oUserName.value = bIsEuid ? oUserName.value : oUserIpt.value;//把用户名传给oUserName 传个http登录的entry
				oTxtAccount.value = oUserName.value + "@" + gOption["aAllDomain"][gCurrentDomain];
				gOption["url2"] = "http://email.163.com/errorpage/err_" + gCurrentDomain + ".htm"
				//错误url2
				oUrl2.value = gOption["url2"];
				//euid
				if (bIsEuid)
				{
					var nTmp = window.location.href.indexOf("?");
					if( nTmp != -1 ){
							oUrl2.value = window.location.href.substring(0,nTmp);
							gOption["url2"] = oUrl2.value;
						}else{
							oUrl2.value = window.location.href;
							gOption["url2"] = oUrl2.value;
						}
				}
				fSetAction();
				fSaveLoginInfo();
				if(gCurrentDomain=="qiye"){
					if($id("chkSSL").checked){
						$id("qiye_secure").value = 1;
					}else{
						$id("qiye_secure").value = 0;
					}
					fCheckqiye();//企业邮登录
					return false;//!免费邮登录
				}else{
					if ($id("chkSSL").checked){return true}//https登录
					return (sPreUrl == null ? false : true);//http登录 加密:preUrl
				}
			}

			//处理action
			function fSetAction(){

				//判断df以及module
				var sDf = fGetQueryHash("df");
				var sModule = fGetQueryHash("module");
				var sUserName = oTxtAccount.value;
				window.oStyle = $id("selStyle"); //风格
				var sStyleValue = oStyle.value;
				
				if(sDf == null){
					sDf = "email" + gCurrentDomain;
				}
				window.customSkin = 'null';
				if(sDf == 'game_qnyh'){
					window.customSkin = 23;
				}
				
				if(sModule == null){
					sModule = "";
				}

				//设置df的cookie
				fSetCookie("df",sDf,false);
				
				// 测速用参数			
				var sUrlRace = aSpdResult[1]+'_'+aSpdResult[0]+'_'+aSpdResult[2]+'_'+aSpdResult[3];
				
				//SSl登录action
				if($id("chkSSL").checked){
					if (sPreUrl==null)
					{
						oForm.action = (gCurrentDomain =="qiye") ? "" : gOption[gCurrentDomain]["sSslUrl"]
									+ fUrlP('funcid','loginone',true)
									+ fUrlP('language','-1')
									+ fUrlP('passtype','1')
									+ fUrlP('iframe','1')//使用js重定向，否则使用SSL302
									+ fUrlP('product',"mail" + gCurrentDomain)
									+ fUrlP('from','web')
									+ fUrlP('df',sDf)
									+ fUrlP('race',sUrlRace)
									+ fUrlP('module',sModule)
									+ fUrlP('uid',sUserName)
									+ fUrlP('style',sStyleValue)
									+ fUrlP('net',sLocationInfo)
									+ fUrlP('skinid',window.customSkin);
						oForm.action += ($id("allSSL").checked && gCurrentDomain != "qiye") ? fUrlP('allssl','true') : "";
					}else{
						oForm.action = gOption["sSslUrl2"] 
									+ fUrlP('type','1',true)
									+ fUrlP('product','mail' + gCurrentDomain)
									+ fUrlP('url',encodeURIComponent(sPreUrl));
					}
					oFormQiye.action = (gCurrentDomain !="qiye") ? "" :  "https://entry.qiye.163.com/domain/domainEntLogin";
				}

				//普通登录action
				if(!$id("chkSSL").checked){
					if (sPreUrl==null){
						//传递entry参数
						(gCurrentDomain == "qiye") ? oFormQiye.action = "http://entry.qiye.163.com/domain/domainEntLogin" : (function(){
								window.sHttpAction = gOption[gCurrentDomain]["sEntryUrl"]
										+ fUrlP('language','-1',true)
										+ fUrlP('net',sLocationInfo)
										+ fUrlP('from','web')
										+ fUrlP('df',sDf)
										+ fUrlP('race',sUrlRace)
										+ fUrlP('module',sModule)
										+ fUrlP('uid',sUserName)
										+ fUrlP('style',sStyleValue);
								loginRequest("fEnData");
							})()
					}else{
						(gCurrentDomain == "qiye") ? oFormQiye.action = "http://entry.qiye.163.com/domain/domainEntLogin" : oForm.action = gOption["sHttpUrl2"] 
									+ fUrlP('type','1',true)
									+ fUrlP('product','mail' + gCurrentDomain)
									+ fUrlP('url',encodeURIComponent(sPreUrl));
					}
				}
			}

			//登录信息写入cookie
			function fSaveLoginInfo(){
				window.oStyle = $id("selStyle"); //风格
				gLoginInfo[gCurrentDomain] = {username : oUserIpt.value, style : oStyle.value};
				var aCookie = [];
				for(var d in gLoginInfo){
					aCookie.push(d + ";"+ gLoginInfo[d].username +";" + gLoginInfo[d].style);
				}
				fSetCookie("nts_mail_user", oUserIpt.value ,true);//错误转向调用
				if($id("rmbUser").checked){
					fSetCookie("alllogininfo", aCookie.join("|"), true);
					fSetCookie("alllogindomain", gCurrentDomain, true);
					if(gCurrentDomain == "qiye" ){
						fSetCookie("qiyeDomain", oDomainQiye.value , true);
					}
				}
				else{
					fSetCookie("alllogininfo", "", true);
					fSetCookie("alllogindomain", "", true);
					fSetCookie("qiyeDomain", "", true);
				}
			}

			//企业邮登录
			function fCheckqiye(){
				$id("txtUserNameqiye").value = oUserIpt.value;
				$id("txtUserDomainqiye").value = oDomainQiye.value;
				$id("txtPasswordqiye").value = oTxtPwd.value;
				if($id("allSSL").checked){
					$id("qiyeall_secure").value = 1;
				}else{
					$id("qiyeall_secure").value = 0;
				}
				$id("loginFormQiye").submit();
			}

			//企业邮登录返回Msg
			function fGetQiyeMsg(){
				var msg = {
					"ERR.LOGIN.USERORPASSNULL":"参数错误:帐号或者密码为空",
					"ERR.LOGIN.DOMAINNULL":"参数错误:未指定的域邮箱参数",
					"ERR.LOGIN.PASSERR":"帐号和密码不匹配",
					"ERR.LOGIN.ILLEGALACCOUNT":"该帐号属于群发名单或者别名，不允许登录",
					"ERR.LOGIN.USERNOTEXIST":"该帐号不存在，请你确认域名和帐号",
					"ERR.LOGIN.SUPERADMINDOMAINERR":"该超级管理员并未申请任何域名邮箱",
					"ERR.LOGIN.SYSTEMBUSY":"登录系统繁忙，请你稍后再试",
					"ERR.LOGIN.IPDENY":"登录失败，你的IP在黑名单中，请你联系管理员",
					"ERR.LOGIN.USRSTATUS1":"该帐号已被禁用，请联系管理员",
					"ERR.LOGIN.USRSTATUS2":"帐号已过期，请联系管理员",
					"ERR.LOGIN.DOMAINNOTEXIST":"该域名未注册",
					"ERR.LOGIN.USRSTATUS5":"该帐号已被管理员删除，请联系管理员",
					"SUC.LOGIN.USRUNLOCK":"该帐号已解除冻结状态，请你再次输入用户和密码继续",
					"ERR.LOGIN.DOMAINEXPED":"该域名邮箱已经过期了",
					"ERR.LOGIN.DOMAINNOTREGISTER":"该域名尚未通过，请以超级管理员登录",
					"ERR.LOGIN.DOMAINSTATUS1":"该域名邮箱已被禁用，请你联系客服",
					"ERR.SESSIONNULL":"会话已经失效，请你重新登录操作",
					"ERR.SYSTEM":"系统繁忙，请你稍后再试",
					"SYSTEM.BUSY":"登录系统繁忙，请你稍后再试",
					"ERR.ADMINREQUIRE":"非法权限，该帐号无法执行这个操作",
					"ERR.PARAMNULL":"系统发生错误：参数为空",
					"ERR.ERR.PARAMTOOLONG":"参数过长",
					"ERR.ILLEGAL":"系统非法操作",
					"ERR.REQ.VERIFYCODE":"密码出错次数过多,请稍后再试"
				};
				oErr.innerHTML = fGetQuery("msg") != null ? String(msg[fGetQuery("msg")]) : "";
				oErr.style.display = '';
			}

			//风格事件
			function fStyleEvent(){
				window.oStyle = $id("selStyle"); //风格
				if (gCurrentDomain == "yeah" && oStyle.value == "10")
				{
					$id("allSSL").parentNode.style.display = "";
				}else{
					if (gCurrentDomain == "yeah" && oStyle.value != "10")
					{
						$id("allSSL").parentNode.style.display = "none";
					}
				}
			}

			/****
			初始化
			*****/

			//事件绑定：各种事件绑定，包括SSL的复选框
			(function(){
				//帐号
				fEventListen(oUserIpt,"focus",function(){
					// cava oUserIpt.className += " ipt-t-focus";
				});
				fEventListen(oUserIpt,"blur",function(){
					// cava oUserIpt.className = "ipt ipt-t";
					fCheckAccount(oUserIpt);
				});
				//域名select
				fEventListen(oDomain,"change",function(){
					fSwitchTab(oDomain.value)
				});
				fEventListen(oDomain,"keyup",function(){
					if((event.keyCode||event.charCode) == 38 || (event.keyCode||event.charCode) == 40) fSwitchTab(oDomain.value)
				});
				//风格选择
				/**
				fEventListen(oStyle,"change",function(){
					fStyleEvent()
				});
				fEventListen(oStyle,"keyup",function(){
					if((event.keyCode||event.charCode) == 38 || (event.keyCode||event.charCode) == 40) fStyleEvent()
				});
				*/
				//域名input-企业邮
				fEventListen(oDomainQiye,"focus",function(){
					oDomainQiye.className += " ipt-t-focus";
				});
				fEventListen(oDomainQiye,"blur",function(){
					oDomainQiye.className = "ipt ipt-t domain-qiye";
					fCheckAccount(oDomainQiye);
				});
				//密码输入框
				fEventListen(oTxtPwd,"focus",function(){
					// cava oTxtPwd.className += " ipt-t-focus";
				});
				fEventListen(oTxtPwd,"blur",function(){
					// cava oTxtPwd.className = "ipt ipt-t";
				});			
				//tab切换 - 163
				fEventListen($id("tab163Link"),"click",function(){
					fSwitchTab("163");
				});
				fEventListen($id("tab163Link"),"mouseover",function(){
					fCls($id("tab163Link"), 'hover', 'add');
				});
				fEventListen($id("tab163Link"),"mouseout",function(){
					fCls($id("tab163Link"), 'hover', 'remove');
				});
				//tab切换 - 126
				fEventListen($id("tab126Link"),"click",function(){
					fSwitchTab("126");
				});
				fEventListen($id("tab126Link"),"mouseover",function(){
					fCls($id("tab126Link"), 'hover', 'add');
				});
				fEventListen($id("tab126Link"),"mouseout",function(){
					fCls($id("tab126Link"), 'hover', 'remove');
				});
				//tab切换 - yeah
				fEventListen($id("tabyeahLink"),"click",function(){
					fSwitchTab("yeah");
				});
				fEventListen($id("tabyeahLink"),"mouseover",function(){
					fCls($id("tabyeahLink"), 'hover', 'add');
				});
				fEventListen($id("tabyeahLink"),"mouseout",function(){
					fCls($id("tabyeahLink"), 'hover', 'remove');
				});
				//tab切换 - qiye
				/*
				fEventListen($id("tabqiyeLink"),"click",function(){
					fSwitchTab("qiye");
				});
				fEventListen($id("tabqiyeLink"),"mouseover",function(){
					fCls($id("tabqiyeLink"), 'hover', 'add');
				});
				fEventListen($id("tabqiyeLink"),"mouseout",function(){
					fCls($id("tabqiyeLink"), 'hover', 'remove');
				});
				*/
				fEventListen($id("tabshoujiLink"),"click",function(){
					fSwitchTab("shouji");
				});
				fEventListen($id("tabshoujiLink"),"mouseover",function(){
					fCls($id("tabshoujiLink"), 'hover', 'add');
				});
				fEventListen($id("tabshoujiLink"),"mouseout",function(){
					fCls($id("tabshoujiLink"), 'hover', 'remove');
				});

				//安全登录
				fEventListen($id("allSSL"),"click",function(){
					fCheckboxChange($id("allSSL"));
					fSecureLinkage($id("allSSL"), "chkSSL");
				});
				fEventListen($id("chkSSL"),"click",function(){
					fCheckboxChange($id("chkSSL"));
					fSecureLinkage($id("chkSSL"), "allSSL");
				});
				//提交按钮
				fEventListen($id("btnSubmit"),"mouseover",function(){
					$id("btnSubmit").className += " btn-login-hover";
				});
				fEventListen($id("btnSubmit"),"mousedown",function(){
					$id("btnSubmit").className = "btn btn-login btn-login-active";
				});
				fEventListen($id("btnSubmit"),"mouseout",function(){
					$id("btnSubmit").className = "btn btn-login";
				});
							
				//点击双击文字
				fEventListen(oIdLabel, 'dblclick', function(){
					oUserIpt.focus();
				});
				fEventListen(oIdLabel, 'click', function(){
					oUserIpt.focus();
				});
				fEventListen(oPwLabel, 'dblclick', function(){
					oTxtPwd.focus();
				});
				fEventListen(oPwLabel, 'click', function(){
					oTxtPwd.focus();
				});
				
				//帐号
				/**
				fEventListen(oUserIpt,'mouseover',function(){
					fCls(oIdL, 'ipt-t-hover', 'add');
				});
				fEventListen(oUserIpt,'mouseout',function(){
					fCls(oIdL, 'ipt-t-hover', 'remove');
				});
				*/
				fEventListen(oUserIpt,'focus',function(){
					fCls(oIdL, 'ipt-t-hover', 'add');
				});
				fEventListen(oUserIpt,'blur',function(){
					fCls(oIdL, 'ipt-t-hover', 'remove');
				});
				/**
				// label
				fEventListen($id("idPlaceholder"),"mouseover",function(){
					fCls(oIdL, 'ipt-t-hover', 'add');
				});
				fEventListen($id("idPlaceholder"),"mouseout",function(){
					fCls(oIdL, 'ipt-t-focus', 'remove');
				});
				*/
				
				//密码
				/**
				fEventListen(oTxtPwd,'mouseover',function(){
					fCls(oPwL, 'ipt-t-hover', 'add');
				});
				fEventListen(oTxtPwd,'mouseout',function(){
					fCls(oPwL, 'ipt-t-hover', 'remove');
				});
				*/
				fEventListen(oTxtPwd,'focus',function(){
					fCls(oPwL, 'ipt-t-hover', 'add');
				});
				fEventListen(oTxtPwd,'blur',function(){
					fCls(oPwL, 'ipt-t-hover', 'remove');
				});
				/**
				// label
				fEventListen($id("pwdPlaceholder"),"mouseover",function(){
					fCls(oPwL, 'ipt-t-hover', 'add');
				});
				fEventListen($id("pwdPlaceholder"),"mouseout",function(){
					fCls(oPwL, 'ipt-t-focus', 'remove');
				});
				*/
				
				
				
				var sEventName = '';
				var bIsIe = false;
				if(document.body.onpropertychange === null){
					sEventName = 'propertychange';
					var bIsIe = true;
				}else{
					sEventName = 'input';
					fCheckAlways();
				}
				var el = document.createElement('div');
				el.setAttribute('oninput', 'return;')
				if(typeof el.oninput === 'function'){
					sEventName = 'input';
					if(bIsIe){
						fCheckAlways();
					}
				}
				fEventListen(oUserIpt, sEventName, fIdInputEvent);	
				fEventListen(oTxtPwd, sEventName, fIdInputEvent);	
				
			})();
					
			//添加删除class 120802
			function fCls(o, sCls, sFunc){
				var oTar = o;
				var nRes = oTar.className.indexOf(sCls);
				if(sFunc == 'add'){
					if(nRes == -1){
						oTar.className = oTar.className + ' ' + sCls;
					}else{
						return;
					}
				}
				if(sFunc == 'remove'){
					if(nRes != -1){
						var sCls = '\\s' + sCls
						var rCls = new RegExp(sCls, 'g');
						oTar.className = oTar.className.replace(rCls, '');
					}else{
						return;
					}
				}
			}
			
			function fIdInputEvent(){
				if(oUserIpt.value==''){
					fCls(oIdL, 'showPlaceholder', 'add');
				}else{
					fCls(oIdL, 'showPlaceholder', 'remove');
				}
				if( oTxtPwd.value == '' ){
					fCls(oPwL, 'showPlaceholder', 'add');
				}else{
					fCls(oPwL, 'showPlaceholder', 'remove');
				}
			}
			
			function fCheckAlways(){
				window.oIntervalCheckAlways = setInterval(
					function(){
						fIdInputEvent();
					},500
				);
			}
			
			//读取cookie中用户登录信息-加载时调用
			(function fGetLoginInfo(){
				var sCookie = fGetCookie("alllogininfo");
				if(sCookie){
					var aCookie = sCookie.split("|");
					for(var i=0;i<aCookie.length;i++){
						var aDomainInfo = aCookie[i].split(";");
						if(aDomainInfo.length == 3){
							gLoginInfo[aDomainInfo[0]] = {username : aDomainInfo[1], style : aDomainInfo[2]};
						}
					}
				}
				var initDomain = fGetCookie("alllogindomain");
				if(initDomain){
					if(initDomain == 'qiye'){ // 兼容cookie中是qiye的情况，全部替换到shouji
						initDomain = 'shouji';
					}
					gCurrentDomain = initDomain;
				}

				//? 判断url的参数是否从邮箱退出,从search和hash取，search优先级最高，hash次之，最后用cookie
				var sLastUser = fGetQuery("u");
				if(sLastUser === null){
					sLastUser = (location.hash + "").replace("#", "");
				}
				if(/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$id/.test(sLastUser)){
					var sParamUser = sLastUser.split("@")[0];
					var sParamDomain = sLastUser.split("@")[1].split(".")[0];
					if(sParamDomain == "163" || sParamDomain == "126" || sParamDomain == "yeah"){
						if(!gLoginInfo[sParamDomain]){
							gLoginInfo[sParamDomain] = {style : "-1"};
						}
						gLoginInfo[sParamDomain].username = sParamUser;
						gCurrentDomain = sParamDomain;
					}
				}
				else{
					sLastUser = (location.hash + "").replace("#", "");
					if(sLastUser == "163" || sLastUser == "126" || sLastUser == "yeah" || sLastUser == "qiye" || sLastUser == "shouji"){
						gCurrentDomain = sLastUser;
					}
				}
			})();
			
			//根据msg重写当前域
			if( gCurrentDomain == "123" || fGetQuery("msg") != null ){
				gCurrentDomain = "qiye";
				fGetQiyeMsg();
			}
			
			//判断用户style
			sStyle = fGetQueryHash("style");

			//进行tab以及用户信息初始化
			fSwitchTab(gCurrentDomain);

			//判断用户
			sUid = fGetQueryHash("uid");
			sPreUid = fGetQueryHash("preview_uid");
			sPreUrl =  fGetQueryHash("preview_url");//获取preurl
			sPreReason = fGetQueryHash("preview_reason");//获取pre原因
			if( sUid != null ){
				oUserIpt.value = sUid;
				fCheckAccount(oUserIpt);
			}
			if( sPreUid != null ){
				oUserIpt.value = sPreUid;
				fCheckAccount(oUserIpt);
			}
			if(sPreUrl != null){
				function fShowPopup(){
					oPopup.style.display = "block";
					oMask.style.height = document.documentElement.clientHeight + "px";
					oMask.style.width = document.documentElement.clientWidth + "px";
					oMask.style.display = "block";
					window.onresize = function(){
						$id("mask").style.height = document.documentElement.clientHeight + "px";
						$id("mask").style.width = document.documentElement.clientWidth + "px";
					}
				}
				function fHidePopup(){
					oPopup.style.display = "none";
					oMask.style.display = "none";
					fSubmit();
				}
				var oPopup = $id("preview_popup"),
				oPopupClose = $id("preview_popup_close"),
				oPopupCont = $id("preview_popup_cont"),
				oPopupSub = $id("preview_popup_submit"),
				oMask = $id("mask");
				if (sPreReason != null){
					sPreReason == "due" ? oPopupCont.innerHTML = "您的附件预览已失效，请登录邮箱查看。": oPopupCont.innerHTML = "您的附件预览已失效，请登录邮箱查看。";
				}else{
					oPopupCont.innerHTML = "您的附件预览已失效，请登录邮箱查看。";
				}
				oPopupClose.onclick = fHidePopup;
				oPopupSub.onclick = fHidePopup;
				fShowPopup();
			}
			
			//euid
			(function(){
				var sEnUid = fGetQueryHash("euid");
				if( sEnUid != null ){
					//euid错误提示
					var nTmp = window.location.href.indexOf("?");
					if( nTmp != -1 ){
						var sErrorCode = window.location.hash.split("?")[1].split("&")[0].split("=")[1];
						window.location.href = window.location.href.substring(0,nTmp) + "&errorType=" + sErrorCode;
					}
					if (sEnUid.indexOf("?") != -1)
					{
						sEnUid = sEnUid.substring(0,sEnUid.indexOf("?"));
					}
					sErrorCode = fGetQueryHash("errorType");
					if(sErrorCode != null){						
						var nTips = "";
						switch ( sErrorCode ){
							case "460" :
							nTips = "密码输入不正确！";
							break
							case "420" :
							nTips = "此帐号不存在！";
							break
							case "422" :
							nTips = "此帐号已被锁定！";
							break
							case "412" :
							nTips = "您短时间内尝试次数过多！";
							break
							default:
							nTips = "系统繁忙！";
						}
						alert(nTips);
						nTmp = window.location.href.indexOf("&errorType");
						window.location.href = window.location.href.substring(0,nTmp);
					}
					//解析euid
					var nEnUidLen = sEnUid.length;
					if( nEnUidLen%2 == 0 ){
						bIsEuid = true;//是euid传入
						var sTmpCode;
						var aTmpStr = [];
						aTmpStr.value = "";
						for( i=0; i<nEnUidLen; i=i+2){
							//反编码
							sTmpCode = sEnUid.substr(i,2);
							sTmpCode = parseInt(sTmpCode,16);
							sTmpCode = String.fromCharCode(sTmpCode);
							aTmpStr.value += sTmpCode;
						}
						fCheckAccount(aTmpStr);//根据帐号切换tab-删除@之后
						oUserName.value = aTmpStr.value;//反编码帐号赋值
						var nTmpCodeLen = aTmpStr.value.length;
						var sTmpStr2 ="";
						if(nTmpCodeLen > 4){
							sTmpStr2 = aTmpStr.value.slice(0,2) + "****" + aTmpStr.value.slice(-2);
						}
						else{
							switch ( nTmpCodeLen ){
								case 4 :
								sTmpStr2 =  aTmpStr.value.slice(0,1) + "****" + aTmpStr.value.slice(-1);
								break;
								case 3 :
								sTmpStr2 =  aTmpStr.value.slice(0,1) + "*" + aTmpStr.value.slice(-1);
								break;							
								case 2 :
								sTmpStr2 =  aTmpStr.value.slice(0,1) + "*" ;
								break;
								case 1 :
								sTmpStr2 = "*"
								break;
								default :
								sTmpStr2 = aTmpStr.value;
							}
						}
						sEnUsername = sTmpStr2;//临时存放替换后的用户名
						oUserIpt.value = sTmpStr2;
						oTxtPwd.focus();
					}
				}
			})();
			
			
			//防诈骗
			window.onload = function(){
				//启动定位访问
				fGetScript('http://iplocator.mail.163.com/iplocator?callback=fGetLocator');
			}
			//重写可信标识
			function fKX(){
				var oKX = $id('KX_IMG');
				var sHref = 'https://ss.cnnic.cn/verifyseal.dll?sn=e12051044010020841301459&ct=df&pa=';
				var sPa = RndNum_CNNIC(6);
				oKX.href = sHref + sPa;
				function RndNum_CNNIC(k){
					for (var rnd = "", i = k; i--; ){
						rnd += Math.floor( Math.random() * 10 );
					}
					return rnd;
				}
			}
			fKX();
			//定位服务
			var sLocationInfo = 'failed',
			fSetLocation = function(data){
				var tmpData = '';
				var aData = data.split('&');
				for(var i = 0; i < aData.length; i++){
					var aParam = aData[i].split('=');
					if(aParam.length >= 2){
						if(aParam[0] == 'net'){
							tmpData = aParam[1];
							break;
						}
					}
				}
				if(tmpData == ''){
					sLocationInfo = 'err';
				}else{
					sLocationInfo = tmpData;
				}
				//使用测速服务用户阀值
				var nPct = 100;// 0 - 100
				var rnd = Math.random()*100;
				if(rnd < nPct){
					fNetErrDebug('rnd' + ((rnd + '').split('.'))[0]);
					fSpeedTestPre();
				}else{
					bSpdAuto = false;
				}
			};
			//net=err debug
			var fNetErrDebug = function(sStep){
				try{
					if(sLocationInfo.match('err') != null){
						var sFlow = '-' + sStep;
						aSpdResult[3] += sFlow;
					}
				}
				catch(e){
				}
			};			
			//测速服务start
			//电信t:0,联通c:1,教育网e:2
			var oSpdTestPosition = {
				 gz : ['gzt', 'gzc', 'gze']
				,hz : ['hz']
				,bj : ['t', 'c', 'e']
			};
			var aSpdResult = [-2,-2,-2,'db'],
			aSpdStartTime = [],
			aSpdEndTime = [],
			aSpdTmpTime = [];
			window.bSpdAuto = true;
			var aSpdQueue = ['t','c','e'];
			/**
			if(nSpdRndPosition <= 100){
				nSpdIsBjUrl = '';
				aSpdQueue = oSpdTestPosition.hz;
				aSpdResult[3] = 'hz';
			}
			*/
			/**
			if(nSpdRndPosition <= 100){
				nSpdIsBjUrl = 'cte/';
				aSpdQueue = oSpdTestPosition.bj;
				aSpdResult[3] = 'bj';
			}
			*/
			var fSpeedTestPre = function(sArea){
				var nSpdRndPosition = Math.random() * 100;
				// 默认几率
				aSpdQueue = oSpdTestPosition.gz;
				aSpdResult[3] = 'gz';
				if(nSpdRndPosition <= 33){
					aSpdQueue = oSpdTestPosition.hz;
					aSpdResult[3] = 'hz';
				}
				if(nSpdRndPosition >33 && nSpdRndPosition <= 66){
					aSpdQueue = oSpdTestPosition.bj;
					aSpdResult[3] = 'bj';
				}
				
				if(sArea){
					aSpdQueue = oSpdTestPosition[sArea];
					aSpdResult[3] = sArea;		
				}
				try{
					for(i=0; i<aSpdQueue.length; i++){
						var sLoca = aSpdQueue[i];
						fGetScript('http://'+ sLoca +'p.127.net/cte/' + sLoca + 'test?' + (new Date()).getTime());
					}
				}catch(e){
					fNetErrDebug('ErrfSpeedTestPre');	
				}
			},
			fSpeedTest = function(nCount){
				try{
					var nRnd;
					if(bSpdAuto){
						fNetErrDebug('fSpeedTest' + nCount);
						aSpdStartTime[nCount] = (new Date()).getTime();
						nRnd = aSpdStartTime[nCount];
					}else{
						aSpdStartTimeUser[nCount] = (new Date()).getTime();
						nRnd = aSpdStartTimeUser[nCount];
					}
					var sLoca = aSpdQueue[nCount];
					fGetScript('http://'+ sLoca +'p.127.net/cte/' + sLoca +'p?' + nRnd);
					if(bSpdAuto){
						aSpdResult[nCount] = -1;
					}
				}catch(e){
					fNetErrDebug('ErrfSpeedTest' + nCount);
				}
			};
			var fSpd = function(nCount){
				try{
					if(bSpdAuto){
						fNetErrDebug('Spd' + nCount);
						aSpdEndTime[nCount] = (new Date()).getTime();
						aSpdResult[nCount] = aSpdEndTime[nCount] - aSpdStartTime[nCount];
					}else{
						aSpdEndTimeUser[nCount] = (new Date()).getTime();
						aSpdResultUser[nCount] = aSpdEndTimeUser[nCount] - aSpdStartTimeUser[nCount];	
						var sIdTmp = 'locationTest';
						var oTar = $id(sIdTmp + nCount);
						var nResult = Number(aSpdResultUser[nCount]);
						/**
						if(nResult < 100){
							oTar.style.color = "green";
						}else if(nResult < 300 && nResult > 100 ){
							oTar.style.color = "#ff7200";
						}else{
							oTar.style.color = "red";
						}
						*/
						oTar.innerHTML = '<span class="fontWeight">' + nResult + '</span>ms';
					}
				}catch(e){
					fNetErrDebug('ErrSpd' + nCount);
				}
			};
			//测速服务end		
			
			// 临时统计
			function fTmpSwitchLog(sName){
				var sJsLogUrl = 'http://count.mail.163.com/beacon/webmail.gif?product=emailtab&type='
				if(window.gSetFirstTab){
					sJsLogUrl = sJsLogUrl + 'user';
				}else{
					sJsLogUrl = sJsLogUrl + 'default';
					window.gSetFirstTab = true;
				}
				sJsLogUrl = sJsLogUrl + '&tabname=' + sName + '&rnd=' + (new Date()).getTime();
				var oJsLogImg = $id('jslogimg');
				if(!oJsLogImg){
					oJsLogImg = document.createElement("IMG");
					oJsLogImg.style.display = 'none';
					oJsLogImg.alt = '';
				}
				oJsLogImg.setAttribute("src", sJsLogUrl);
				if(oJsLogImg.alt == ''){
					document.body.appendChild(oJsLogImg);
					oJsLogImg.alt == 'set'					
				}
				return;
			}
		</script>
		<!-- 预加载极速js -->
		<iframe src="http://mail.163.com/preload5.htm" style="display:none" id="frmJs5"></iframe>
	</body>
</html>